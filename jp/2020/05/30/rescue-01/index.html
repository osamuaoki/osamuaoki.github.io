<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Rescue media(1) | Goofing Osamu</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/en/">English</a></li>
      
      <li><a href="/jp/">Japanese</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Rescue media(1)</span></h1>

<h2 class="date">2020/05/30</h2>
</div>

<main>


<table width="100%">
  <tbody>
  <tr>
  
  <td align="left" width="33%"><a href="/jp/2020/05/05/btrfs-01/">Previous Post</a></td>
  
  <td align="center" width="33%"><a href="/jp/">Top</a></td>
  
  <td align="right" width="33%"><a href="#">***</a></td>
  
  </tr>
  </tbody>
</table>

<p>UEFIとかMBRとかいろいろある昨今のRescue mediaを探しました。</p>

<p>Grubのレスキューイメージもありますが、これを直接操るのは結構大変
と思っていたら、
<a href="https://www.supergrubdisk.org/super-grub2-disk/">Super Grub2</a>
と言う便利なものがあることに気づきました。</p>

<p>Super Grub2はUEFIとかMBRの設定が壊れたシステムを自動調査してくれ
起動してくれるのみならず、DebianやUbuntuのLIVE ISOイメージを
DOSのFATファイルシステムのメディアに複数書き込むだけで、これらを
選択起動できるようにしてくれる優れものです。</p>

<p>よく分かっていませんが、ディスクの入れ替えやインストーをして、その後
元のディスクに戻した際にUEFIでブートしなくなったことを経験しました。
そんな際にSuper Grub2だと素直に起動しました。この際に、ただ起動後単に
<code>update-grub</code>としただけでは、起動設定更新がうまく行かなかったことが
ありました。こんな時にはまず以下としました。</p>

<pre><code>$ sudo dpkg-reconfigure grub-efi-amd64
</code></pre>

<p>これだとNVRAM variablesの更新他いろいろするようです。さらにBIOSの
ブートの優先順位をさわることも有効でした。古いMBなのでBIOSが賢くない
気がしました。</p>

<p>実際にSuper Grub2に用意した8GBのUSBキーでは、レスキュー用のLinuxの
Live imageとして以下のISOイメージを入れました。</p>

<ul>
<li><a href="https://www.supergrubdisk.org/rescatux/">Rescatux</a></li>
<li><a href="https://sourceforge.net/projects/boot-repair/">boot-repair</a></li>
<li><a href="https://www.debian.org/CD/live/">Debian live install image</a></li>
</ul>

<p>こららがあると思うだけで、UEFIとMBRの両方のシステム対応なので
安心感があります。</p>

<p>ここで使うISOイメージですが、Debianの標準のインストール用の
ISOイメージは、上記が用いるGrub2のループマウントでは
使えないようです。</p>

<p>Debianの標準のインストール用のISOイメージは、全イメージを
生のUSBキーに直接<code>cp</code>か<code>dd</code>で書いたものを準備する必要があります。
１つ古い小さなUSBキーに書いて手元に置いています。</p>

<p>このDebianの標準のインストール用のISOイメージはですが、
わたしは視力があり音声サポートがいらないので、D-Iが作っている
<a href="https://d-i.debian.org/daily-images/amd64/daily/netboot/">mini.iso</a>
を使っています。46MBと極端に小さいので便利です。</p>

<p>実際のインストールの際には、キーファイル(GNUPG/SSHデーターや
VIMやローカルのshell script他)の入った小型バックアップの
USBキーを準備すると効率的です。</p>

<!-- vim: sw=2 sts=2 et se ai tw=79: -->


<table width="100%">
  <tbody>
  <tr>
  
  <td align="left" width="33%"><a href="/jp/2020/05/05/btrfs-01/">Previous Post</a></td>
  
  <td align="center" width="33%"><a href="/jp/">Top</a></td>
  
  <td align="right" width="33%"><a href="#">***</a></td>
  
  </tr>
  </tbody>
</table>

</main>

  <footer>
  
  
  <hr/>
  &copy; 2019-2020 <a href="https://github.com/osamuaoki">Osamu Aoki</a>
  
  </footer>
  </body>
</html>

