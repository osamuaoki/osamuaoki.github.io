<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>QWFRTY配列 | Goofing Osamu</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/en/">English</a></li>
      
      <li><a href="/jp/">Japanese</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">QWFRTY配列</span></h1>

<h3 class="date">Date:
2022/02/14 (initial publish),
2022/02/19 (last update)
</h3>
</div>

<main>


<table width="100%">
  <tbody>
  <tr>
  
  <td align="left" width="33%"><a href="/jp/2022/02/07/blackpill-1/">Previous Post</a></td>
  
  <td align="center" width="33%"><a href="/jp/">Top</a></td>
  
  <td align="right" width="33%"><a href="#">***</a></td>
  
  </tr>
  </tbody>
</table>

<h2>TOC</h2>

<nav id="TableOfContents">
  <ul>
    <li><a href="#背景">背景</a></li>
    <li><a href="#qwfrty配列">QWFRTY配列</a>
      <ul>
        <li><a href="#qwerty配列からの変更点覚え方">QWERTY配列からの変更点（覚え方）:</a></li>
        <li><a href="#qwfrty設計の方針と結果">QWFRTY設計の方針と結果:</a></li>
        <li><a href="#qwfrty配列のキー移動の統計と可学習性">QWFRTY配列のキー移動の統計と可学習性:</a></li>
        <li><a href="#qwfrty設計の背景事実">QWFRTY設計の背景事実：</a></li>
      </ul>
    </li>
    <li><a href="#世の中にある有名キー配列">世の中にある有名キー配列</a>
      <ul>
        <li><a href="#qwerty配列">QWERTY配列</a></li>
        <li><a href="#eucalyn">Eucalyn</a></li>
        <li><a href="#colemak-mod-dh">Colemak Mod-DH</a></li>
        <li><a href="#workman">WORKMAN</a></li>
        <li><a href="#colemak">Colemak</a></li>
        <li><a href="#dvorak-mod-slash">Dvorak mod-slash</a></li>
      </ul>
    </li>
    <li><a href="#文字頻度">文字頻度</a></li>
    <li><a href="#余談">余談</a></li>
  </ul>
</nav>

<h2 id="背景">背景</h2>
<p>MCUを使ったIOTの初等プロジェクトとして、<a href="https://github.com/osamuaoki/cg56">cgc56というQMKを利用したキーボード</a>を作りました。</p>
<p><img src="/img/cgc56.jpg" alt="4x14 ortholinear配列キーボード(cgc56)"></p>
<p>今回完成したキーボードは、PLANCKより4x14と幅があることを利用して、左右の手の間隔をとり、真ん中の余裕の部分に頻出記号キーを押し込んでいます。</p>
<ul>
<li>PLANCKよりは普通のキーボードに近いキー配列になっています。</li>
<li>2つあるFnキーのうち１つ押しだと数字・記号・F1-F12キーです。(現状、左右の差はありません)</li>
<li>Fnキー２つ同時押しでカーソールキーにアクセスできます。ちょうどこれがVIMの「<code>hjkl</code>」と同じ位置です。</li>
<li>Fnキー無しのデフォルトのキー配列は、QWERTY配列とQWFRTY配列が切り替えられます。</li>
</ul>
<p>ここで、QWFRTY配列をデフォルトのキー配列した際の、Fnキーによるキー配列変化は以下です。</p>
<p><img src="/img/QWFRTY-3.png" alt="QWFRTY　３段">
<a href="http://www.keyboard-layout-editor.com/#/gists/b677dff2db907d27eb84b4d7ea741394">cgc56 QWFRTY キーボードデータ 3段</a></p>
<p>使ってみて意外とおもしろいので、ここに要点等をメモしておきます。</p>
<p>ずぼらな性格上、DVORAK, COLMAK, WORKMAN, COLEMAK-DHのいずれも学習障壁が高すぎました。(これらの有名配置だと、VIエディターでのカーソール移動も難しくなってしまいます)。</p>
<p>元々は中指を伸ばして「<code>E</code>」を叩きづらいという個人的課題解決目的のキーボードプロジェクトでした。これだけなら<code>E</code>と<code>F</code>のスワップで済ますのも良いのですが、それだけでは勿体ないので、苦労しない範囲でDVRAKの交互打鍵に近づけられないかと考えた妥協点案が「QWFRTY配列」です。これはあくまでQMKを利用した自作キーボードの最適化キー配列実験で、私の日常生活はQWERTY配列です。</p>
<h2 id="qwfrty配列">QWFRTY配列</h2>
<p>「QWFRTY配列」は、11個のキーだけが標準の「QWERTY配列」から移動された配列です。</p>
<p>名前は、１文字違いでややこしいですが、「<strong>QWFRTY配列</strong>」としました。キーは位置の要点を抜き出すと以下です。</p>
<pre tabindex="0"><code>       LEFT HAND                 RIGHT HAND
│ Q │ W │_F_│ R │ T │      │ Y │_D_│_K_│_G_│ P │
│ A │_I_│_U_│_E_│_O_│      │_S_│_H_│_J_│ L │ ; │
│ Z │ X │ C │ V │ B │      │ N │ M │ , │ . │ / │
</code></pre><p>まあ、所詮実験レベルのお遊びですが、我ながら悪くない気もします。</p>
<h3 id="qwerty配列からの変更点覚え方">QWERTY配列からの変更点（覚え方）:</h3>
<p>キーの移動を以下の様にとらえると覚えられます。</p>
<ul>
<li>&ldquo;IUEO&quot;は５０音順に&quot;A&quot;に続けて配列。 (&ldquo;E&quot;は&quot;F&quot;と場所交換、&ldquo;SDG&quot;は外しておく)</li>
<li>&ldquo;HJKL&quot;を逆Tのカーソールキー位置関係に移動。(&ldquo;L&quot;を軸に1つづつ移動、ホームを空ける)</li>
<li>&ldquo;SDG&rdquo; をこの順番・位置関係を維持しながらで右の空きスペースに順番に移動。(この移動だけは覚える必要有り)</li>
</ul>
<h3 id="qwfrty設計の方針と結果">QWFRTY設計の方針と結果:</h3>
<ul>
<li>母音 (AIUEO) を左手に集めるDVORAK/EUCALYN配列のコンセプトは継承。
<ul>
<li>交互打鍵をでき、特に日本語との相性も良い。</li>
<li>母音文字順はDVORAK/EUCALYN配列と変えて、頻出の&quot;E&quot;をホームの動きの良い人差し指の下に移動。</li>
<li>５０音順キー配列としたので、日本人に覚えやすい</li>
<li>それなりによく使う&quot;S&quot;と&quot;D&quot;は、反対側の動きの良い人差し指操作の範囲に移動。</li>
</ul>
</li>
<li>キー移動を必要最小限化する COLEMAK/WORKMAN配列のコンセプトは継承。
<ul>
<li>QWERTYからの移行のメンタルストレスを最小限にできる。</li>
</ul>
</li>
<li>EUCALYN配列の VIMのカーソールキー (HJKL) をまとめるアイデアを拝借
<ul>
<li>大きなキー移動を避けるため、&ldquo;L&quot;は動かさなかった。</li>
<li>QWERTYよりむしろ使い安くなった（？）</li>
<li>&ldquo;S&quot;と&quot;D&quot;がくるアクセスの良いスペースが空いたので一石二鳥。</li>
<li>Fn-Fnでアクセスする、本当のカーソールキーと同じ位置となった。</li>
</ul>
</li>
</ul>
<h3 id="qwfrty配列のキー移動の統計と可学習性">QWFRTY配列のキー移動の統計と可学習性:</h3>
<ul>
<li>11/30のキーが移動(下記の他の有名配列の半分近くなので、覚えやすい)</li>
<li>気分的には、&ldquo;SDG&quot;の3つのキーの新場所を覚えるだけ程度の、楽な学習障壁感。</li>
</ul>
<h3 id="qwfrty設計の背景事実">QWFRTY設計の背景事実：</h3>
<h4 id="文字数頻度指標">文字数頻度指標</h4>
<p>(log圧縮済み、QMKのソース利用)は以下です。（大きいほどよく出てくるので、使いやすいところに置きたい文字）</p>
<ul>
<li><code>s=26.2 d=26.2 f=16.9 g=9.4</code> <code>*.c</code> <code>*.h</code></li>
<li><code>s=20.1 d=14.4 f=8.2  g=6.7</code> <code>*.md</code></li>
</ul>
<h4 id="交互打鍵日本語入力">交互打鍵・日本語入力</h4>
<p>&ldquo;f&rdquo; は日本ではあまり使わない子音なので、交互打鍵を考えた際にも子音だが母音側にあっても&quot;g&quot;より悪影響が少ない。英語環境では、ともに中以下の頻度なので大差ない。</p>
<h4 id="右配置の移動文字間の優先順位">右配置の移動文字間の優先順位</h4>
<p><code>s &gt; d &gt; g</code></p>
<h2 id="世の中にある有名キー配列">世の中にある有名キー配列</h2>
<ul>
<li><a href="https://yushakobo.jp/blog/pluis9/2017/12/thinkkeylayout/">https://yushakobo.jp/blog/pluis9/2017/12/thinkkeylayout/</a></li>
</ul>
<p>標準の「QWERTY配列」以外は、新しいキー配列提案が先に並んでいます。</p>
<p>以下は重要30キーにのみフォーカスし、Ortholinear系・ERGODOX系を意識した位置表示です。</p>
<h3 id="qwerty配列">QWERTY配列</h3>
<pre tabindex="0"><code>       LEFT HAND                 RIGHT HAND
│ Q │ W │ E │ R │ T │      │ Y │ U │ I │ O │ P │
│ A │ S │ D │ F │ G │      │ H │ J │ K │ L │ ; │
│ Z │ X │ C │ V │ B │      │ N │ M │ , │ . │ / │
</code></pre><ul>
<li>0/30キーが移動(デフォルト)</li>
</ul>
<h3 id="eucalyn">Eucalyn</h3>
<ul>
<li><a href="https://eucalyn.hatenadiary.jp/entry/saikyo-interface">https://eucalyn.hatenadiary.jp/entry/saikyo-interface</a> (2017-12-21 初期形)</li>
</ul>
<pre tabindex="0"><code>│ / │ , │ . │ F │ Q │      │ M │ R │ D │ Y │ P │
│ A │ O │ E │ I │ U │      │ G │ T │ K │ S │ N │
│ Z │ X │ C │ V │ W │      │ B │ H │ J │ L │ ; │
</code></pre><ul>
<li>
<p>23/30キーが移動</p>
</li>
<li>
<p><a href="https://eucalyn.hatenadiary.jp/entry/about-eucalyn-layout">https://eucalyn.hatenadiary.jp/entry/about-eucalyn-layout</a> (2018-08-31 完成形)</p>
</li>
</ul>
<pre tabindex="0"><code>│ Q │ W │ , │ . │ ; │      │ M │ R │ D │ Y │ P │
│ A │ O │ E │ I │ U │      │ G │ T │ K │ S │ N │
│ Z │ X │ C │ V │ F │      │ B │ H │ J │ L │ / │
</code></pre><ul>
<li>20/30キーが移動</li>
</ul>
<h3 id="colemak-mod-dh">Colemak Mod-DH</h3>
<ul>
<li><a href="https://colemakmods.github.io/mod-dh/">https://colemakmods.github.io/mod-dh/</a></li>
</ul>
<pre tabindex="0"><code>│ Q │ W │ F │ P │ B │      │ J │ L │ U │ Y │ ; │
│ A │ R │ S │ T │ G │      │ M │ N │ E │ I │ O │
│ Z │ X │ C │ D │ V │      │ K │ H │ , │ . │ / │
</code></pre><ul>
<li>17/30キーが移動</li>
</ul>
<h3 id="workman">WORKMAN</h3>
<ul>
<li><a href="https://workmanlayout.org/">https://workmanlayout.org/</a></li>
</ul>
<pre tabindex="0"><code>│ Q │ D │ R │ W │ B │      │ J │ F │ U │ P │ ; │
│ A │ S │ H │ T │ G │      │ Y │ N │ E │ O │ I │
│ Z │ X │ M │ C │ V │      │ K │ L │ , │ . │ / │
</code></pre><ul>
<li>21/30キーが移動</li>
</ul>
<h3 id="colemak">Colemak</h3>
<ul>
<li><a href="https://colemak.com/">https://colemak.com/</a></li>
</ul>
<pre tabindex="0"><code>│ Q │ W │ F │ P │ G │      │ J │ L │ U │ Y │ ; │
│ A │ R │ S │ T │ D │      │ H │ N │ E │ I │ O │
│ Z │ X │ C │ V │ B │      │ K │ M │ , │ . │ / │
</code></pre><ul>
<li>19/30キーが移動</li>
</ul>
<h3 id="dvorak-mod-slash">Dvorak mod-slash</h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Dvorak_keyboard_layout">https://en.wikipedia.org/wiki/Dvorak_keyboard_layout</a></li>
</ul>
<pre tabindex="0"><code>│ / │ , │ . │ P │ Y │      │ F │ G │ C │ R │ L │
│ A │ O │ E │ U │ I │      │ D │ H │ T │ N │ S │
│ ; │ Q │ J │ K │ X │      │ B │ M │ W │ V │ Z │
</code></pre><ul>
<li>28/30キーが移動</li>
</ul>
<p>適用対象がOrtholinear配列のため「<code>'</code>」が「<code>/</code>」となっている。（どのキー配列でも、「<code>'</code>」は真ん中の上記枠外の隙間に配置済み）</p>
<h2 id="文字頻度">文字頻度</h2>
<p>QMK の<code>quantum/</code>中や<code>docs/</code>中を統計して、スペースの数を１００としている。&quot;<code>*</code>&ldquo;はログ圧縮して大局観が分かるようになっています。</p>
<pre tabindex="0"><code>Cソースコード                  ドキュメンテーション中
&quot; &quot;  = 100.0 **********
&quot;e&quot;  = 61.9 *********          &quot;e&quot;  = 37.7 ********
&quot;t&quot;  = 41.0 ********           &quot;t&quot;  = 27.7 *******
&quot;a&quot;  = 32.2 ********           &quot;a&quot;  = 22.2 *******
&quot;i&quot;  = 38.3 ********           &quot;i&quot;  = 22.1 *******
&quot;o&quot;  = 31.4 *******            &quot;o&quot;  = 23.4 *******
&quot;n&quot;  = 30.7 *******            &quot;n&quot;  = 19.4 *******
&quot;r&quot;  = 30.3 *******            &quot;r&quot;  = 19.4 *******
&quot;s&quot;  = 26.2 *******            &quot;s&quot;  = 20.1 *******
&quot;d&quot;  = 26.2 *******            &quot;d&quot;  = 14.4 ******
&quot;c&quot;  = 23.7 *******            &quot;c&quot;  = 13.3 ******
&quot;l&quot;  = 18.2 *******            &quot;l&quot;  = 13.5 ******
&quot;f&quot;  = 16.9 ******             &quot;f&quot;  =  8.2 *****
&quot;u&quot;  = 15.4 ******             &quot;u&quot;  = 10.9 ******
&quot;m&quot;  = 14.3 ******             &quot;m&quot;  =  9.8 *****
&quot;p&quot;  = 13.9 ******             &quot;p&quot;  =  8.3 *****
&quot;k&quot;  = 10.6 ******             &quot;k&quot;  =  5.5 ****
&quot;h&quot;  = 10.3 ******             &quot;h&quot;  = 11.1 ******
&quot;b&quot;  =  9.5 *****              &quot;b&quot;  =  6.5 *****
&quot;g&quot;  =  9.4 *****              &quot;g&quot;  =  6.7 *****
&quot;y&quot;  =  9.3 *****              &quot;y&quot;  =  6.5 *****
&quot;v&quot;  =  5.9 *****              &quot;v&quot;  =  3.3 ****
&quot;w&quot;  =  5.7 *****              &quot;w&quot;  =  4.4 ****
&quot;x&quot;  =  5.5 ****               &quot;x&quot;  =  1.6 **
&quot;q&quot;  =  0.9 *                  &quot;q&quot;  =  1.0 **
&quot;j&quot;  =  0.5 *                  &quot;j&quot;  =  0.3 *
&quot;z&quot;  =  0.5 *                  &quot;z&quot;  =  0.2 *
</code></pre><p>ここで高頻度の子音文字「tnrsdcl」の非母音側への集中度と母音集中側の母音の数をみます：</p>
<table>
<thead>
<tr>
<th>キー配列</th>
<th style="text-align:center">頻出子音字集中</th>
<th style="text-align:center">母音集中</th>
<th style="text-align:center">キー移動数</th>
</tr>
</thead>
<tbody>
<tr>
<td>QUERTY</td>
<td style="text-align:center">5/7</td>
<td style="text-align:center">3/5</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td><strong>QUFRTY</strong></td>
<td style="text-align:center">4/7</td>
<td style="text-align:center">5/5</td>
<td style="text-align:center">11</td>
</tr>
<tr>
<td>Colemak dh</td>
<td style="text-align:center">5/7</td>
<td style="text-align:center">4/5</td>
<td style="text-align:center">17</td>
</tr>
<tr>
<td>Colemak</td>
<td style="text-align:center">5/7</td>
<td style="text-align:center">4/5</td>
<td style="text-align:center">19</td>
</tr>
<tr>
<td>Eucalyn</td>
<td style="text-align:center">6/7</td>
<td style="text-align:center">5/5</td>
<td style="text-align:center">20</td>
</tr>
<tr>
<td>WORKMAN</td>
<td style="text-align:center">5/7</td>
<td style="text-align:center">4/5</td>
<td style="text-align:center">21</td>
</tr>
<tr>
<td>DVRAK</td>
<td style="text-align:center">7/7</td>
<td style="text-align:center">5/5</td>
<td style="text-align:center">28</td>
</tr>
</tbody>
</table>
<p><strong>QWFRTY</strong>
はキー移動を避けたため、最頻出の「<code>T</code>」が母音側のままという問題が出ています。
でも<code>TH</code>などの子音同士の連続の交互打鍵は確保できていますので、捨てたものではありません。
とにかく変更が少なく、母音が集中するのがいい感じです。
（確かに<code>T</code>と<code>Y</code>の交換で改善しますが、キー移動数が増えるのと<code>TH</code>が隣接等のマイナスもあります。過ぎたるは及ばざるが如しです。）</p>
<p>ちなみにC言語のソースの場合、記号でスペース比較で約４％以上の頻度は以下だけでした。</p>
<pre tabindex="0"><code>&quot; &quot;  = 100.0 **********
&quot;_&quot;  = 35.9 ********
&quot;(&quot;  = 10.5 ******
&quot;)&quot;  = 10.5 ******
&quot;;&quot;  =  7.0 *****
&quot;,&quot;  =  6.7 *****
&quot;#&quot;  =  6.2 *****
&quot;*&quot;  =  6.2 *****
&quot;.&quot;  =  4.4 ****
&quot;/&quot;  =  6.4 *****
&quot;0&quot;  =  6.3 *****
&quot;=&quot;  =  4.8 ****
&quot;&quot;&quot;  =  3.5 ****
</code></pre><h2 id="余談">余談</h2>
<p>キーボードの全体感の再確認のため、主要キーの配置をFnキー状態違いも含めて重ね書きすると以下となります。</p>
<p><img src="/img/QWFRTY.png" alt="QWFRTY詳細">
<a href="http://www.keyboard-layout-editor.com/#/gists/bb66579d5945aafb78ffca0227cb87f0">cgc56 QWFRTY キーボードデータ 詳細版</a>。
当分色々変更して遊びそうなので、最新の状況は、<a href="https://github.com/osamuaoki/qmk_firmware/blob/osamu1/keyboards/cgc56/keymaps/default/keymap.c">私のQMKソース</a>を確認するのが一番確実ではあります。( どうも親指を置くFn-キーの間隔を１つ外にずらした方が手首が楽です。やっぱりスプリットデザインにするべきかな、、、、)</p>
<p>上記統計結果もあって、「<code>_</code> 」 はスプリット直交配置の真ん中に特別にシフト無しでアクセスできるようにしてます。
また&rdquo;(&ldquo;と&rdquo;)&ldquo;は定位置のFn片押しの&rdquo;,&ldquo;と&rdquo;/&ldquo;以外に、Fn両押しですが押しやすい真ん中にも配置しました。</p>
<p>さらに、スペースキーは、実質6つあります。スペース連打用が１つ、あとは shift, control, Alt, FnUp, FnDnとタップを使って兼用です。</p>
<p>日本語入力切り替えは、確定論的挙動としたいので<code>alt-</code>`トグルではなく<code>shift-space</code> や<code>control-space</code>でローマ字かな入力と英字入力の間を往復してます。(この設定はMac風の気がします。<a href="/jp/2019/03/23/gnome-uskb-im-select/">GNOME環境</a>や<a href="https://www.lifehacker.jp/article/235889windows10-typing-tips/">WINDWS環境</a>だとデフォルトではないですが簡単に設定実現できます。)
この変換関連でのスペース多用の際の使い勝手は実際のキーボードでは細かい配慮がされています。右の<code>control</code>をホールドから左のタップか、はたまた左の<code>shift</code>をホールドしてから右のタップかでローマ字かな入力と英字入力の間を往復できます。この際に既にホールドしていない中心付近の５つのどのキーをタップしてOKです。</p>
<p>一時Fnキーの使用無しでカーソールアクセス出きるような配列も便利かと思い試しましたが、ホームポジションから大きく手を動かしのキーボードの端での操作となるのであまりよくなかったです。</p>
<p>当面、１４”のノートパソコン(Thinkpad T14 Gen1)に無いキーはいらないと割り切っています。必要なら追加の１０キーパッドを用意するのでしょう。</p>
<p>PLANCK他のキーボードより幅が有り、一体型ですが両手間隔がとれ猫背にならずに使えます。</p>
<p>従来のキーボード両端の小指で操作するシフトキーの類も残していますが、基本親指でシフト・コントロール他の操作が出きるようにしています。<a href="https://salicylic-acid3.hatenablog.com/entry/key-layout">Alice配列</a>にしなくとも、端のキー（特に下の角のキー）を基本使わないと、小指の使用を抑えられ指にやさしいし、手首へのストレスも下げられます。</p>
<p>ちなみに、母音文字を集める際に採用した&quot;AIUEO&quot;配列ですが、「なぜ&quot;E&quot;の使用指が変わらない配列や、はたまた他の配列でないのか？」といわれたら、「特段の理由はないが、中指使用を抑えたい個人的事情と覚えやすさ」というのが実感です。DVORAK配列の&quot;AOEUI&quot;や、頻度での優先順位を考えた&quot;AOIEU&quot;や&quot;AOEIU&quot;でも充分いい気がします。</p>
<p>とにかく、ここまでの細かい個人的事情にも自由に対応できるのがQMKキーボードの良いところです。</p>
<p>vimで<code>inoremap jk &lt;ESC&gt;</code>等としてたら、ホームのみの<code>inoremap jj &lt;ESC&gt;</code>や<code>inoremap jh &lt;ESC&gt;</code>等とでもする方が良いかもしれません。</p>
<!-- raw HTML omitted -->


<table width="100%">
  <tbody>
  <tr>
  
  <td align="left" width="33%"><a href="/jp/2022/02/07/blackpill-1/">Previous Post</a></td>
  
  <td align="center" width="33%"><a href="/jp/">Top</a></td>
  
  <td align="right" width="33%"><a href="#">***</a></td>
  
  </tr>
  </tbody>
</table>

</main>

  <footer>
  
  
  <hr/>
  © 2013-2021 <a href="https://github.com/osamuaoki">Osamu Aoki</a>
  
  </footer>
  </body>
</html>

