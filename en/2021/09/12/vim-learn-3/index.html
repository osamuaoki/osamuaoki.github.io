<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Re-learning Vim (3) | Goofing Osamu</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/en/">English</a></li>
      
      <li><a href="/jp/">Japanese</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Re-learning Vim (3)</span></h1>

<h3 class="date">Date:
2021/09/12 (initial publish),
2021/09/22 (last update)
</h3>
</div>

<main>


<table width="100%">
  <tbody>
  <tr>
  
  <td align="left" width="33%"><a href="/en/2021/08/28/git-submodule-01/">Previous Post</a></td>
  
  <td align="center" width="33%"><a href="/en/">Top</a></td>
  
  <td align="right" width="33%"><a href="#">***</a></td>
  
  </tr>
  </tbody>
</table>

<h2>TOC</h2>

<nav id="TableOfContents">
  <ul>
    <li><a href="#neovim-migration">Neovim migration</a></li>
    <li><a href="#terminal-settings">Terminal settings</a></li>
    <li><a href="#key-bindings">Key bindings</a></li>
    <li><a href="#dependency-package-management">Dependency package management</a></li>
    <li><a href="#main-configuration-management">Main configuration management</a></li>
  </ul>
</nav>

<h2 id="neovim-migration">Neovim migration</h2>
<p>After finding out <strong>Neovim</strong> (nvim) starts up 30%-40% faster than <strong>Vim 8</strong>
probably due to asynchronous processing and more effective use of multi-core
modern CPU, I decided to migrate to nvim.  Then lua thing got my attention.
Since nvim source package for version 0.5 was available in Debian experimental,
I made a local package from it.  So I am in good shape to try the latest lua
scripts.</p>
<p>After translating my old vimrc to lua as <a href="https://github.com/osamuaoki/dot-nvim">https://github.com/osamuaoki/dot-nvim</a>
, I realized this isn&rsquo;t going anywhere.  It was easy to convert
<code>.config/nvim/init.vim</code> but it was hard to decide how to migrate all my vimL
based packages to new new lua based ones.</p>
<p>I found 3 interesting projects which offer examples for how this is done.</p>
<ul>
<li>Lunar Vim
<ul>
<li>SRC: <a href="https://github.com/LunarVim/LunarVim">https://github.com/LunarVim/LunarVim</a></li>
<li>HOME: <a href="https://www.lunarvim.org/#opinionated">https://www.lunarvim.org/#opinionated</a></li>
</ul>
</li>
<li>NvChad
<ul>
<li>SRC: <a href="https://github.com/NvChad/NvChad">https://github.com/NvChad/NvChad</a></li>
<li>WIKI: <a href="https://github.com/NvChad/NvChad/wiki">https://github.com/NvChad/NvChad/wiki</a> (old?</li>
<li>HOME: <a href="https://nvchad.netlify.app/">https://nvchad.netlify.app/</a></li>
</ul>
</li>
<li>DOOM-NVIM
<ul>
<li>SRC: <a href="https://github.com/NTBBloodbath/doom-nvim">https://github.com/NTBBloodbath/doom-nvim</a></li>
</ul>
</li>
</ul>
<p>For ease of customization, I chose NvChad.  Result was great start-up time
reduction.</p>
<ul>
<li>vim  230 ms (dot-vim in vimL)</li>
<li>nvim 161 ms (dot-nvim in lua starting vimL packages)</li>
<li>nvim  65 ms (NvChad in all lua)  &ndash; use lazy loading</li>
<li>nvim  59 ms (doom-nvim in all lua) &ndash; use lazy loading more(?)</li>
</ul>
<p>Here is my memo on how to use DOOM-NVIM and customize it.</p>
<h2 id="terminal-settings">Terminal settings</h2>
<p>Set DEL-code(0x7F) for Backspace and use escape sequence for Delete.  This
frees the ASCII BS (CTRL-H) code so window jump can be mapped to <code>&lt;C-H&gt;</code>.</p>
<p>Now I see why this was default.</p>
<h2 id="key-bindings">Key bindings</h2>
<p>I am keeping mostly default key bindings for now.</p>
<ul>
<li>Vim&rsquo;s original key bindings:
<ul>
<li><code>:help index</code></li>
</ul>
</li>
<li>Configuration introduced key bindings (with opened empty file):
<ul>
<li><code>:put =execute('nmap')</code> etc.</li>
</ul>
</li>
<li><code>which-key.nvim</code> also solves allow us to set timeoutlen to be short (500ms
instead of default 1000ms).
<ul>
<li><code>which-key.nvim</code> is good for dummy like me.</li>
<li>This makes <code>jk</code> for <code>&lt;Esc&gt;</code> not so clunky.</li>
</ul>
</li>
<li><code>&lt;C-SPACE&gt;</code> is used by some package.  This needs to be moved to allow
Japanese input for me.
<ul>
<li><code>F6</code>-<code>F10</code>, <code>ALT</code>/<code>SHIFT</code>/<code>WIN-SPACE</code> should be off limit.</li>
</ul>
</li>
<li>securemodelines, spell-under, ale &ndash; think about including</li>
</ul>
<p>In order to always start nvim, I created nv as its alias.</p>
<h2 id="dependency-package-management">Dependency package management</h2>
<p>Any of these packer based system, it is good idea to run followings after
editing the system.</p>
<pre><code>$ nvim -c &quot;autocmd User PackerComplete quitall&quot; -c &quot;PackerSync
</code></pre><h2 id="main-configuration-management">Main configuration management</h2>
<p>In order to minimize conflict, I now use <code>git pull --rebase</code> to my local
branch.  (Probably using upstream provided interface)</p>
<!-- raw HTML omitted -->


<table width="100%">
  <tbody>
  <tr>
  
  <td align="left" width="33%"><a href="/en/2021/08/28/git-submodule-01/">Previous Post</a></td>
  
  <td align="center" width="33%"><a href="/en/">Top</a></td>
  
  <td align="right" width="33%"><a href="#">***</a></td>
  
  </tr>
  </tbody>
</table>

</main>

  <footer>
  
  
  <hr/>
  Â© 2013-2021 <a href="https://github.com/osamuaoki">Osamu Aoki</a>
  
  </footer>
  </body>
</html>

