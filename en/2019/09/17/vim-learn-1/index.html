<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Re-learning Vim (1) | Goofing Osamu</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/en/">English</a></li>
      
      <li><a href="/jp/">Japanese</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Re-learning Vim (1)</span></h1>

<h2 class="date">2019/09/17</h2>
</div>

<main>


<table width="100%">
  <tbody>
  <tr>
  
  <td align="left" width="33%"><a href="/en/2019/09/02/python3-black/">Previous Post</a></td>
  
  <td align="center" width="33%"><a href="/en/">Top</a></td>
  
  <td align="right" width="33%"><a href="#">***</a></td>
  
  </tr>
  </tbody>
</table>



<p>I could use Vim as a basic editor with TKL-keyboard while tapping some keys
multiple times.  This was functional but not so elegant!</p>

<p>I decided to re-learn Vim to use it <strong>properly</strong>.  Here is my learning memo.</p>

<h2 id="concept">Concept</h2>

<ul>
<li>Use default vim (minimum configuration, if possible).

<ul>
<li>Use as much native functionalities.</li>
</ul></li>
<li>50%/60%-keyboard ready.

<ul>
<li>No cursor keys.</li>
</ul></li>
</ul>

<h2 id="guiding-voice">Guiding voice</h2>

<p>Here are a few insightful recommendations on the best practices for Vim.</p>

<ul>
<li>Voice of Vim God (Vim upstream: Bram Moolenaar): <a href="https://www.moolenaar.net/habits.html">Seven habits of effective text editing</a></li>
<li>Voice of Vim Gurus: <a href="https://www.vi-improved.org/recommendations/">#vim Recommendations</a></li>
<li>Voice of internet mumbling such as
<a href="https://github.com/mhinz/vim-galore">vim-galore</a> on which I don&rsquo;t always
agree.</li>
<li><a href="https://vimhelp.org/">RTFM</a> or type &ldquo;<code>vim '+h|only'</code>&rdquo;.</li>
</ul>

<h2 id="normal-mode">NORMAL MODE</h2>

<p>Unlike other editors, the existence of NORMAL MODE is what makes Vim as the
great editor which allows the minimum usage of the ALT-key and CTRL-key.</p>

<h3 id="cheat-sheet">Cheat sheet</h3>

<p>Here is my cheat sheet to remind me of all the important key strokes used
around NORMAL MODE with emphasis on motion keys:</p>

<pre><code> NORMAL MODE:        Goto BOF → gg      r +--- Next Char
 screen                   n N # ?ααα   e / +-- End of Word (non-alnum)
 scroll        ai+wW({[&lt;sp&quot;'`↓  ^B    t / / +- Word Next (non-alnum)
 ↓     Change c{motion} cc  c↑  ^U   n / / / + End of Word (space)
 ↓     Delete d{motion} dd  d↑  H   e / / / / +Word Next (space)
 +--+  Copy   y{motion} yy  y↑  {  C / / / / / +Till α, x  Delete char
 |zt|  Put After/Before p / P   ( / / / / / / / Find α, r  Replace char
 |^e|  &quot;α  Use α as register    k/ / / / / / /  / EOL,  ~  Change case
 |zz|     0 ^ Fα Tα gE B ge b h M l e w E W tα fα $    gd  Goto definiton
 |^y| ↓↓↓ Split Window ↓↓↓      j ←--- Line            ^]  Tag jump
 |zb| ^W + ncsvhjkl=+-_&lt;&gt;|      ) ←--- Sentence        ^T  Tag jump-back
 +--+ Join lines       J        } ←--- Paragraph       ^O  Jump back
      Forward Backward Search   L ←--- Bottom of Page  {visual}&gt;  Indent →
      n N /ααα ?ααα ← Find ααα  ^D ←-- Prev 1/2 Page   {visual}&lt;  Indent ←
      n N *    # ←--- Indicator ^F ←-- Next Page       {visual}=  Indent ⇆
      , ; tα   Tα ←-- Till α    /ααα ← Find ααα * n N  {visual}gq Format Text
      , ; fα   Fα ←-- Find α    G ←--- Goto EOF        :        Command mode
   Next Prev   %  ←-- Match     [{ ]} [[ ]] [] ][ Look for {}
 Record: qα, End-Record: q, Play-Record: @α, Mark as α: mα, Jump to α: `α/'α
 Undo: u, Redo: ^R, Repeat: . , Fold: Open zo/zO/zr/zR, Close zc/zC/zm/zM
 Insert Mode: i/a Before/After Char, I/A Before/After Line, O/o above/below
 Visual Mode: v Char V Line ^V Block, Replace Mode: R, Normal mode: &lt;ESC&gt;
</code></pre>

<p>This is intentionally terse.</p>

<p>I found some key sequences such as <code>3w</code>, <code>bc$</code>, <code>ciw</code>, <code>3yaw</code>, … quite useful,
now.</p>

<h3 id="hints-for-memorizing-key-strokes">Hints for memorizing key strokes</h3>

<p>Some key assignments look confusing.  Here are my hints for memorizing such
key strokes.</p>

<ul>
<li>Cursor move keys

<ul>
<li><code>j</code> shape points to downward.</li>
<li><code>k</code> shape points to upward.</li>
</ul></li>
<li>Screen scroll keys:

<ul>
<li><code>^B</code>: Backward page</li>
<li><code>^U</code>: Upward <sup>1</sup>&frasl;<sub>2</sub> page</li>
<li><code>^Y</code>: expose up 1 line == Yester(day)-line, next to ^u (Keep cursor)</li>
<li><code>^F</code>: Forward  page</li>
<li><code>^D</code>: Downward <sup>1</sup>&frasl;<sub>2</sub> page</li>
<li><code>^E</code>: Expose down 1 line, next to ^d (Keep cursor)</li>
</ul></li>
</ul>

<h3 id="interesting-commands">Interesting commands</h3>

<ul>
<li><code>ga</code>: Get Unicode point (HEX etc.)</li>
<li><code>g8</code>: Get Binary data HEX sequence</li>
<li><code>^G</code>: Get cursor Position</li>
<li><code>{visual}g?</code>: ROT13</li>
</ul>

<h3 id="map-keys">Map keys</h3>

<p>I map SPACE-key as leader-key in NORMAL MODE since it has no practical use and
easier access than default <code>\</code>-key.</p>

<pre><code>let mapleader = ' '
</code></pre>

<h3 id="some-options">Some options</h3>

<p>I tend to set as follows in the vim startup file (<code>~/.vimrc</code> or its equivalent):</p>

<pre><code>&quot; make vim copy buffer bigger (default 50 lines: viminfo='100,&lt;50,s10,h)
set viminfo='100,&lt;5000,s100,h

&quot; Allow to move cursor beyond for block
set virtualedit=block

</code></pre>

<h2 id="insert-mode-and-command-mode">INSERT MODE and COMMAND MODE</h2>

<p>INSERT MODE and INSERT MODE and COMMAND MODE are intuitive with cursor keys.</p>

<p>COMMAND MODE is started from NORMAL MODE by pressing <code>:</code> or <code>/</code> or <code>?</code>.</p>

<h3 id="cool-inputs-with-ctrl-keys">Cool inputs with <code>CTRL</code>-keys</h3>

<p>Here are some non-intuitive key sequences used by INSERT MOD used by INSERT
MODE.  Some key sequences with are also valid for COMMAND MODE.</p>

<ul>
<li><code>^H</code>: Delete a character before the cursor. (same as <code>&lt;BS&gt;</code>)</li>
<li><code>^W</code>: Delete the word before the cursor.</li>
<li><code>^U</code>: Delete all entered characters before the cursor.</li>
<li><code>^P</code>: Find previous keyword.(map non-starter <code>&lt;S-TAB&gt;</code> to this)</li>
<li><code>^N</code>: Find next keyword.    (map non-starter <code>&lt;TAB&gt;</code> to this)</li>
<li><code>^Y</code>: Insert the character which is above the cursor. (Only INSERT MODE)</li>
<li><code>^E</code>: Insert the character which is below the cursor. (Only INSERT MODE)</li>
<li><code>^T</code>: Insert one shiftwidth of indent. (Only INSERT MODE)</li>
<li><code>^D</code>: Delete one shiftwidth of indent. (Only INSERT MODE)</li>
<li><code>^D</code>: List all possible choices. (Only in COMMAND MODE started by <code>:</code>)
wildmenu)</li>
<li><code>^F</code>: open edittable command history. (only COMMAND MODE)</li>
<li><code>^X</code>: start of sub-mode (<code>h: insert_expand</code>).</li>
<li><code>0^D</code>: delete all indent.</li>
<li><code>^Vxαα</code>: insert character at <code>0xαα</code>. (command mode)</li>
<li><code>^Vuαααα</code>: insert unicode character at <code>0xαααα</code>. (command mode)</li>
<li><code>^Vuαααααα</code>: insert unicode character at <code>0xαααααααα</code>. (command mode)</li>
</ul>

<p>You can use NORMAL-MODE-like editing by starting the COMMAND MODE with <code>q:</code> or
<code>q/</code> or <code>q?</code>.  Alternatively, typing <code>^F</code> in command mode started by <code>:</code> or <code>/</code>
or <code>?</code> also starts NORMAL-MODE-like editing.</p>

<h3 id="map-non-starter-tab-in-insert-mode">Map non-starter TAB in INSERT MODE</h3>

<p>I map non-starter <code>TAB</code> following the vim manual (<code>:h ins-completion</code>):</p>

<pre><code>&quot; auto complete &lt;c-n&gt; with &lt;tab&gt; in non-bol
&quot;
function! clevertab()
   if strpart( getline('.'), 0, col('.')-1 ) =~ '^\s*$'
      return &quot;\&lt;tab&gt;&quot;
   else
      return &quot;\&lt;c-n&gt;&quot;
   endif
endfunction
inoremap &lt;tab&gt; &lt;c-r&gt;=clevertab()&lt;cr&gt;
&quot; auto complete &lt;c-p&gt; with &lt;s-tab&gt; in non-bol
&quot;
function! cleverstab()
   if strpart( getline('.'), 0, col('.')-1 ) =~ '^\s*$'
      return &quot;\&lt;s-tab&gt;&quot;
   else
      return &quot;\&lt;c-p&gt;&quot;
   endif
endfunction
inoremap &lt;S-Tab&gt; &lt;C-R&gt;=CleverSTab()&lt;CR&gt;
</code></pre>

<h3 id="tab-in-command-mode">TAB in COMMAND MODE</h3>

<p>Normally, <code>TAB</code> in COMMAND MODE starts wildmenu under <code>:set wildmenu</code>.
You can use <code>TAB</code> and <code>S-TAB</code> to chose the one you want.</p>

<h3 id="map-to-esc">Map to ESC</h3>

<p>Pressing <code>ESC</code>-key is a bit stressful since it is far from the finger home
position.  I map a quick key sequence of &ldquo;<code>kj</code>&rdquo; to <code>ESC</code>-key.</p>

<pre><code>inoremap kj  &lt;Esc&gt;
inoremap kjk kj
</code></pre>

<p>The second mapping is to allow quick input of &ldquo;<code>kj</code>&rdquo; by &ldquo;<code>kjk</code>&rdquo;.  Without this,
you need to wait a second after entering &ldquo;<code>k</code>&rdquo; to enter &ldquo;<code>kj</code>&rdquo;.</p>

<p>(&rdquo;<code>k</code>&rdquo; and &ldquo;<code>j</code>&rdquo; are easiest to type and unlikely under normal input situation.
I remember this as my <strong>Knee-Jerk-reaction</strong> to the distant <code>ESC</code>-key.)</p>

<!-- vim: set sw=2 sts=2 ai si et tw=79 ft=markdown: -->


<table width="100%">
  <tbody>
  <tr>
  
  <td align="left" width="33%"><a href="/en/2019/09/02/python3-black/">Previous Post</a></td>
  
  <td align="center" width="33%"><a href="/en/">Top</a></td>
  
  <td align="right" width="33%"><a href="#">***</a></td>
  
  </tr>
  </tbody>
</table>

</main>

  <footer>
  
  
  <hr/>
  &copy; 2019 <a href="https://github.com/osamuaoki">Osamu Aoki</a>
  
  </footer>
  </body>
</html>

